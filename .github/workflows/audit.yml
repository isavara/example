name: Audit

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:

      build:
        name: Build with new git
        runs-on: rome-runner-1-label-1
        
        steps:
        - name: Print PATH
          run: echo $PATH

        - name: checkout the code
          uses: actions/checkout@v4

        - name: Set up Go
          uses: actions/setup-go@v3
          with:
            go-version: 1.19.13 

        - name: Install golint
          run: go install golang.org/x/lint/golint@latest
  
        - name: Install staticcheck
          run: go install honnef.co/go/tools/cmd/staticcheck@latest
          
        - name: Run golint and exit on issues
          run: |
                golint_output=$(golint ./...)
                echo "$golint_output"
                if [ -n "$golint_output" ]; then
                  echo "golint found issues"
                  exit 1
                else
                  echo "No golint issues found"
                fi          