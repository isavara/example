name: Audit

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:

      build:
        name: Build with new git version
        runs-on: rome-runner-4-label-4
        
        steps:
          - name: Print PATH
            run: echo $PATH

          - name: checkout the code
            uses: actions/checkout@v3
            with:
              fetch-depth: 0

# jobs:
#   audit:
#     runs-on: rome-runner-4-label-4
#     steps:
#       - name: Print current working directory
#         run: pwd

#       - name: Capture PR Information
#         id: pr-info
#         run: |
#           pr_number="${{ github.event.number }}"
#           pr_url="${{ github.event.pull_request.html_url }}"
#           pr_branch="${{ github.event.pull_request.head.ref }}"
#           repo_url="${{ github.event.repository.html_url }}"
#           echo "PR Number: $pr_number"
#           echo "PR URL: $pr_url"
#           echo "PR Branch: $pr_branch"
#           echo "Repository URL: $repo_url"
#           echo "pr_number=$pr_number" >> $GITHUB_ENV
#           echo "pr_url=$pr_url" >> $GITHUB_ENV
#           echo "pr_branch=$pr_branch" >> $GITHUB_ENV
#           echo "repo_url=$repo_url" >> $GITHUB_ENV
 

    # - name: Set up Go
    #   uses: actions/setup-go@v2
    #   with:
    #     go-version: 1.19.13

    # - name: Install golint
    #   run: go install golang.org/x/lint/golint@latest

    # - name: Run golint and exit on issues
    #   run: |
    #       golint_output=$(golint ./...)
    #       echo "$golint_output"
    #       if [ -n "$golint_output" ]; then
    #         echo "golint found issues"
    #         exit 1
    #       else
    #         echo "No golint issues found"
    #       fi

    # - name: Install staticcheck
    #   run: go install honnef.co/go/tools/cmd/staticcheck@latest

    # - name: RUN staticCHECK in all directories with go.mod
    #   run: |
    #       echo "Current directory: $(pwd)"
    #       echo "Directory contents:"
    #       ls -la
    #       for dir in */ ; do
    #         if [ -f "$dir/go.mod" ]; then
    #           echo "Found go.mod in $dir"
    #           cd "$dir"
    #           staticcheck ./...
    #           cd -
    #         else
    #           echo "No go.mod found in $dir, skipping"
    #         fi
    #       done